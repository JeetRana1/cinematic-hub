# Ad-Blocker Proxy - Quick Reference Card

## üöÄ Start Proxy
```bash
npm install  # First time only
npm start    # Start server (port 3001)
```

## ‚úÖ Verify It's Running
```bash
curl http://localhost:3001/api/health
```

Response:
```json
{"status": "healthy", "service": "Cinematic Hub..."}
```

## üíª Use in Code

### Get Proxied URL
```javascript
const proxied = window.adBlockerProxy.getProxiedUrl(videoUrl, 'vidsrc');
```

### Load in Player
```javascript
window.adBlockerProxy.loadVideoInContainer(videoUrl, 'vidsrc', container);
```

### Check Status
```javascript
if (window.adBlockerProxy.isHealthy) {
  // Proxy is online
}
```

## üì∫ Provider Strings

- `'vidsrc'` - vidsrc.me, vidsrc.xyz
- `'vidplay'` - vidplay.online, vidplay.site
- `'filemoon'` - filemoon.sx, filemoon.to
- `'generic'` - Any other provider

## üîß Common Tasks

### Change Port
```bash
PORT=3000 npm start
```

### Run in Background (PM2)
```bash
pm2 start api/ad-blocker-proxy.js
```

### Debug
```javascript
window.adBlockerProxy.testProxy()  // Test all providers
window.adBlockerProxy.isHealthy    // Check if online
```

## üêõ Quick Fixes

| Issue | Solution |
|-------|----------|
| `npm install` fails | `npm install --legacy-peer-deps` |
| Port already in use | `PORT=3002 npm start` |
| Proxy offline | Make sure `npm start` is running |
| Video not loading | Check video URL is valid |
| Ads still showing | Hard refresh (Ctrl+Shift+R) |

## üìä Integration Checklist

- [ ] Run `npm install`
- [ ] Run `npm start`
- [ ] Verify health: `curl http://localhost:3001/api/health`
- [ ] Update stream button to use `adBlockerProxy.getProxiedUrl()`
- [ ] Test with a vidsrc/vidplay video
- [ ] Check browser console for no errors
- [ ] Done! ‚ú®

## üîó Example Usage

```javascript
// In stream button click handler
async function playVideo() {
  const videoUrl = 'https://vidsrc.me/embed/movie/tt0111161';
  
  if (window.adBlockerProxy?.isHealthy) {
    const proxied = window.adBlockerProxy.getProxiedUrl(videoUrl, 'vidsrc');
    window.open(proxied, '_blank');
  } else {
    window.open(videoUrl, '_blank');  // Fallback
  }
}
```

## üìÅ Files

| File | Purpose |
|------|---------|
| `api/ad-blocker-proxy.js` | Backend server |
| `js/ad-blocker-proxy-integration.js` | Frontend integration |
| `package.json` | Dependencies |
| `AD_BLOCKER_PROXY_SETUP.md` | Full guide |
| `QUICKSTART_AD_BLOCKER.md` | Quick start |
| `STREAM_INTEGRATION_EXAMPLE.js` | Code examples |

## üéØ Key Concepts

- **Backend**: Node.js Express server that cleans video HTML
- **Frontend**: JavaScript library that communicates with backend
- **Proxy URL**: Your video URL routed through the cleaning proxy
- **Health Check**: Verifies proxy is online and working
- **Fallback**: If proxy offline, uses original video URL

## üö¢ Production

### Docker
```bash
docker build -t video-proxy .
docker run -p 3001:3001 video-proxy
```

### PM2
```bash
pm2 start api/ad-blocker-proxy.js --name video-proxy
pm2 startup
pm2 save
```

## üìû Debug Commands

```javascript
// Browser console
window.adBlockerProxy.checkHealth()          // Check if online
window.adBlockerProxy.getProxiedUrl(url, 'vidsrc')  // Get proxy URL
window.adBlockerProxy.testProxy()            // Test all providers
window.adBlockerProxy.isHealthy              // Boolean status
```

## ‚ö° Performance

- Startup: < 1 second
- Per video: 2-5 seconds
- Memory: ~50-100MB
- CPU: Minimal

## üõ°Ô∏è Security

‚úÖ Blocks 11+ ad networks  
‚úÖ Removes tracking scripts  
‚úÖ Prevents popups/redirects  
‚úÖ Rate limited  
‚úÖ CORS protected  

## üìö More Info

See full docs in:
- `AD_BLOCKER_PROXY_SETUP.md`
- `QUICKSTART_AD_BLOCKER.md`
- `STREAM_INTEGRATION_EXAMPLE.js`

---

**Quick Start**: `npm install && npm start` then update stream buttons to use `adBlockerProxy.getProxiedUrl()`
