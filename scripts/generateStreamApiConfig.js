// Generates public/streamApiConfig.js from env or defaults
const fs = require('fs');
const path = require('path');

const OUTPUT = path.join(__dirname, '..', 'public', 'streamApiConfig.js');

const STREAM_API = process.env.STREAM_API || 'https://5d528c0d-bcad-4415-816c-eaccfdad56e0-00-2sav6y42resw5.riker.replit.dev/api/v1';

const content = `// Auto-generated by scripts/generateStreamApiConfig.js\n// Configure your 8Stream API endpoint here\nwindow.STREAM_API = '${STREAM_API}';\n`;

fs.mkdirSync(path.dirname(OUTPUT), { recursive: true });
fs.writeFileSync(OUTPUT, content, 'utf8');
console.log(`[streamApiConfig] Wrote ${OUTPUT} with STREAM_API=${STREAM_API}`);
