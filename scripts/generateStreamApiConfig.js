// Generates public/streamApiConfig.js from env or defaults
const fs = require('fs');
const path = require('path');

const OUTPUT = path.join(__dirname, '..', 'public', 'streamApiConfig.js');

// Use Replit 8Stream API by default, or environment variable
const STREAM_API = process.env.STREAM_API || 'https://5d528c0d-bcad-4415-816c-eaccfdad56e0-00-2sav6y42resw5.riker.replit.dev/api/v1';

const content = `// Auto-generated by scripts/generateStreamApiConfig.js
// Configure your Stream API endpoint here
window.STREAM_API = '${STREAM_API}';
console.log('âœ“ Stream API configured:', window.STREAM_API);
`;

fs.mkdirSync(path.dirname(OUTPUT), { recursive: true });
fs.writeFileSync(OUTPUT, content, 'utf8');
console.log(`[streamApiConfig] Wrote ${OUTPUT} with STREAM_API=${STREAM_API}`);
